<html>
	<head>
		<title>Hack</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
		<link href="/css/bootstrap.min.css" rel="stylesheet">
		<link href="/css/bootstrap-social.css" rel="stylesheet">
		<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/pe-icon-7-stroke/css/pe-icon-7-stroke.css">

		<!-- Optional - Adds useful class to manipulate icon font display -->
		<link rel="stylesheet" href="/css/pe-icon-7-stroke/css/helper.css">

		<style>

			body{font-weight:300;-webkit-font-smoothing:antialiased;background:rgb(105,210,231);}
			h2{text-align:center;font-weight:300}
			.btn-social-icon{margin-bottom:4px}
			.jumbotron{height:100%;position:relative;background:rgb(105,210,231);font-size:16px;color:#fff;color:rgba(255,255,255,0.75);text-align:center;border-radius:0;margin-bottom: 0;padding-top:10px;padding-bottom: 100px;}.jumbotron h1{margin-bottom:15px;font-weight:300;letter-spacing:-1px;color:#fff;}
			.jumbotron iframe{width:90px !important;height:20px !important;border:none;overflow:hidden;margin:2px}
			.btn-outline{margin-top:15px;margin-bottom:15px;padding:18px 24px;font-size:inherit;font-weight:500;color:#fff;background-color:transparent;border-color:#fff;border-color:rgba(255,255,255,0.5);transition:all .1s ease-in-out}.btn-outline:hover,.btn-outline:active{color:#6c71c4;background-color:#fff;border-color:#fff}
			.jumbotron p a,.jumbotron-links a{font-weight:500;color:#fff;transition:all .1s ease-in-out}
			.jumbotron p a:hover,.jumbotron-links a:hover{text-shadow:0 0 10px rgba(255,255,255,0.55)}
			.jumbotron-links{margin-top:15px;margin-bottom:0;padding-left:0;list-style:none;font-size:14px}.jumbotron-links li{display:inline}
			.jumbotron-links li+li{margin-left:20px}
			.how-to{padding:20px}.how-to h2{text-align:center}
			.how-to li{font-size:21px;line-height:1.7;margin-top:20px}.how-to li p{font-size:16px;color:#555}
			.how-to code{font-size:85%;word-wrap:break-word;white-space:normal}
			footer{text-align:center;opacity:.8;padding:20px 0 40px}
			.links{margin:0;list-style:none;padding-left:0}.links li{display:inline;padding:0 10px}
			.social-class .social-hex{font-family:Monaco,Menlo,Consolas,"Courier New",monospace;font-size:10px;opacity:.3;float:right}
			.social-class li{margin-bottom:4px}.social-class li:hover .social-hex{opacity:1}
			.social-class li:hover code{background-color:#e8e8ee}
			.social-class code{cursor:default}


			.page-header {
				height:80px;
				margin: 0;
				padding:0;
			}
			.logo {
				font-size: 30px;
				position: relative;
				float: left;
				padding:18px 0 0 24px;
			}
			.inline-logo {

				font-size: 50px;
				color:#444;
				font-weight: 300;
				letter-spacing: -1px;
				padding-top: 10px;
			}
			.topGithubUsers {
				font-size: 20px;
			}
			.score {
				height:150px;
				width: 150px;
				border-radius: 75px;
				background:rgb(250,105,0);
				font-size: 60px;
				padding-top: 30px;
				position: absolute;
				margin-left: auto;
				margin-right: auto;
				left: 0;
				right: 0;
				top:145px;
			}
			.compareTitle {
				position: absolute;
				margin-left: auto;
				margin-right: auto;
				left: 0;
				right: 0;
				top:300px;
				font-size: 36px;
			}
			#facebookOauth {
				position: absolute;
				margin-left: auto;
				margin-right: auto;
				left: 0;
				right: 0;
				top:350px;
				width:375px;
			}
			#facebookOauth a {

			}
			#improveScore {
				background:rgb(250,105,0);
				height: 45px;
				width: 375px;
				position: absolute;
				margin-left: auto;
				margin-right: auto;
				left: 0;
				right: 0;
				top:450px;
				text-align: center;
				border-radius: 10px;
				font-size: 24px;
				cursor: hand;
				cursor: pointer;
				line-height: 40px;
				border: 1px solid rgb(220, 111, 32);
			}
			#improveScore {
				text-decoration: none;
				color:#fff;
			}
			#friendsTable {
				
    			position: relative;
				top:350px;
			}
			#friendsTable tbody tr:nth-child(2n) {
			    background: rgb(237, 231, 231);
			}
			#pleaseWait {
				position: absolute;
				margin-left: auto;
				margin-right: auto;
				left: 0;
				right: 0;
				width: 400px;
				font-size: 24px;
				top: 550px;
				display: none;
			}
			#loader {
				display: none;
			}
			.spinner {
			  margin: 100px auto;
			  width: 20px;
			  height: 20px;
			  position: relative;
			}

			.container1 > div, .container2 > div, .container3 > div {
			  width: 6px;
			  height: 6px;
			  background-color: #333;

			  border-radius: 100%;
			  position: absolute;
			  -webkit-animation: bouncedelay 1.2s infinite ease-in-out;
			  animation: bouncedelay 1.2s infinite ease-in-out;
			  /* Prevent first frame from flickering when animation starts */
			  -webkit-animation-fill-mode: both;
			  animation-fill-mode: both;
			}

			.spinner .spinner-container {
			  position: absolute;
			  width: 100%;
			  height: 100%;
			}

			.container2 {
			  -webkit-transform: rotateZ(45deg);
			  transform: rotateZ(45deg);
			}

			.container3 {
			  -webkit-transform: rotateZ(90deg);
			  transform: rotateZ(90deg);
			}

			.circle1 { top: 0; left: 0; }
			.circle2 { top: 0; right: 0; }
			.circle3 { right: 0; bottom: 0; }
			.circle4 { left: 0; bottom: 0; }

			.container2 .circle1 {
			  -webkit-animation-delay: -1.1s;
			  animation-delay: -1.1s;
			}

			.container3 .circle1 {
			  -webkit-animation-delay: -1.0s;
			  animation-delay: -1.0s;
			}

			.container1 .circle2 {
			  -webkit-animation-delay: -0.9s;
			  animation-delay: -0.9s;
			}

			.container2 .circle2 {
			  -webkit-animation-delay: -0.8s;
			  animation-delay: -0.8s;
			}

			.container3 .circle2 {
			  -webkit-animation-delay: -0.7s;
			  animation-delay: -0.7s;
			}

			.container1 .circle3 {
			  -webkit-animation-delay: -0.6s;
			  animation-delay: -0.6s;
			}

			.container2 .circle3 {
			  -webkit-animation-delay: -0.5s;
			  animation-delay: -0.5s;
			}

			.container3 .circle3 {
			  -webkit-animation-delay: -0.4s;
			  animation-delay: -0.4s;
			}

			.container1 .circle4 {
			  -webkit-animation-delay: -0.3s;
			  animation-delay: -0.3s;
			}

			.container2 .circle4 {
			  -webkit-animation-delay: -0.2s;
			  animation-delay: -0.2s;
			}

			.container3 .circle4 {
			  -webkit-animation-delay: -0.1s;
			  animation-delay: -0.1s;
			}

			@-webkit-keyframes bouncedelay {
			  0%, 80%, 100% { -webkit-transform: scale(0.0) }
			  40% { -webkit-transform: scale(1.0) }
			}

			@keyframes bouncedelay {
			  0%, 80%, 100% { 
			    transform: scale(0.0);
			    -webkit-transform: scale(0.0);
			  } 40% { 
			    transform: scale(1.0);
			    -webkit-transform: scale(1.0);
			  }
			}

			</style>

	<body>


		<div class="jumbotron">
	      	<div class="container">
		        <div class='inline-logo'><%= userObj.name %></div>
		        <div class='topGithubUsers'>
		        	Top <%= userObj.github_data.top %>% of all github users
		        </div>
		        <div class='score'>
		        	<%= Math.round(userObj.github_data.totalPoints) %>
		        </div>
	          <!--<div class='compareTitle'>Compare with Friends.</div>-->

	          

	          <div id='facebookOauth'>
	          	<a href="https://www.facebook.com/sharer/sharer.php?u=http://letshack.herokuapp.com/<%= userObj.username %>&t=Check out my hacker score. I got a <%= Math.round(userObj.github_data.totalPoints) %>!" class="fblink btn btn-block btn-social btn-lg btn-facebook">
            		<i class="fa fa-facebook"></i> Share on Facebook
            	</a>

            	<br/>
            	<!--
            	<a href="https://www.facebook.com/dialog/oauth?response_type=code&amp;redirect_uri=http%3A%2F%2Flocalhost%3A5000%2Flogin%2F<%= userObj._id%>%2Fcallback&amp;client_id=188879964608233&amp;scope=email%2C%20user_about_me%2C%20user_website%2C%20friends_about_me%2C%20friends_website%2C%20read_friendlists&amp;" class="fblink btn btn-block btn-social btn-lg btn-facebook">
            		<i class="fa fa-facebook"></i> Login With Facebook
            	</a>
            -->
          	  </div>
          	  <!--
          	  <a id='improveScore' href='/<%= userObj.username%>/improve'>
          	  	<div >Improve your score</div>
          	  </a>
          	-->
          	

	          <div id='container'>
	          	<table id='friendsTable' class="table table-striped">
			        <tr>
			          <td><b>Avatar<b></td>
			          <td><b>Name<b></td>
			          <td><b>Link</b></td>
			          <td><b>Score</b></td>
			        </tr>
			        <% for(var i=0; i< friends.length; i++) {%>
			           <tr>
			              <td><img height='50px' src='<%= friends[i].avatar_url %>'/></td>
			              <td><%= friends[i].name %></td>
			              <td><a href='http://letshack.herokuapp.com/<%= friends[i].username %>' target='_blank'><%= friends[i].username %></a></td>
			              <td><%= Math.round(friends[i].totalPoints) %></td>
			            </tr>
			        <% } %>
			        <div id='pleaseWait'></div>
			        <div id='loader'>
		    			<div class="spinner">
						  <div class="spinner-container container1">
						    <div class="circle1"></div>
						    <div class="circle2"></div>
						    <div class="circle3"></div>
						    <div class="circle4"></div>
						  </div>
						  <div class="spinner-container container2">
						    <div class="circle1"></div>
						    <div class="circle2"></div>
						    <div class="circle3"></div>
						    <div class="circle4"></div>
						  </div>
						  <div class="spinner-container container3">
						    <div class="circle1"></div>
						    <div class="circle2"></div>
						    <div class="circle3"></div>
						    <div class="circle4"></div>
						  </div>
						</div>
		    		</div>
		    		<div id='loaderTime'>
		    		</div>
		    	</div>
			        
			      </table>
			  </div>
	     </div>

   		<script>
   			var loader = document.getElementById('loader');
   			var loaderTime = document.getElementById('loaderTime');
			var friends = <%- JSON.stringify(friends)%>;
			var timeLimit = "<%= userObj.github_data.followers %>";
			var pleaseWait = document.getElementById('pleaseWait');
			if(friends.length === 0) {
				pleaseWait.textContent = "Please wait 15 seconds while we process your followers.";
				pleaseWait.style.display = 'block';
				setTimeout(function(){
					location.reload();
				}, 15000);
			}

		</script>

	</body>
	
</html>